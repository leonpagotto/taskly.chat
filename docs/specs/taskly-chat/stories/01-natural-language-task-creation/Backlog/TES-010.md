# TES-010 Parser Unit Tests

Story: 01 Natural Language Task Creation
Status: Proposed
Priority: Medium
Owner: Engineering
Tags: testing, parsing

## Purpose
Add granular unit tests for `parseUserInput` covering intent detection, confidence computation, missing field inference, and task draft generation edge cases.

## Scope
- Inputs with clear intent (create task, list tasks, modify task)
- Ambiguous inputs producing low confidence
- Extraction of due dates, simple priorities, and project references (future-safe placeholders)
- Ensuring no mutation of input arguments

## Acceptance Criteria
- Tests reside in `packages/ai/__tests__/parse.spec.ts`
- Achieve >90% statement coverage for `parse.ts`
- Cover at least 3 ambiguous phrase cases with confidence < 0.5
- Ensure parse result always includes `missingFields` array (possibly empty)
- Snapshot representative parse outputs for regression safety

## Out of Scope
Integration tests across API endpoint (separate task).

## Risks / Notes
Heuristic parser may evolve; snapshot tests must be resilient (focus on structural shape + key fields, not incidental wording).

## Completion Criteria
PR merged with green CI, coverage report attached in PR description.
